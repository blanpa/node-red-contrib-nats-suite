<script type="text/javascript">
  RED.nodes.registerType('nats-suite-stream-publisher', {
    category: 'NATS Suite',
    color: '#2FAF9C',
    defaults: {
      name: { value: '' },
      server: { value: '', type: 'nats-suite-server' },
      streamName: { value: 'default-stream', required: true },
      subjectPattern: { value: '*', required: true },
      defaultSubject: { value: '' },
      retention: { value: 'limits' },
      maxMessages: { value: -1 },
      maxAge: { value: '24h' },
      maxBytes: { value: -1 },
      duplicateWindow: { value: '2m' },
      storage: { value: 'file' },
      replicas: { value: 1 },
      operation: { value: 'publish' },
      createOnInit: { value: true },
      // Extended NATS config options
      maxConsumers: { value: -1 },
      maxMsgsPerSubject: { value: -1 },
      maxMsgSize: { value: -1 },
      discard: { value: 'old' },
      compression: { value: 'none' },
      allowDirect: { value: false },
      mirrorDirect: { value: false },
      sealed: { value: false },
      denyDelete: { value: false },
      denyPurge: { value: false },
      allowRollupHdrs: { value: false },
      allowMsgTtl: { value: false },
    },
    inputs: 1,
    outputs: 1,
    icon: 'nats-icon-white.png',
    align: 'right',
    label: function () {
      const op = this.operation || 'publish';
      if (op === 'publish') {
        return this.name || `stream pub (${this.streamName || 'stream'})`;
      }
      return this.name || `stream ${op}`;
    },
    paletteLabel: 'nats stream publisher',
    oneditprepare: function () {
      // Collapsible sections
      $('.nats-section-header').on('click', function () {
        const $header = $(this);
        const $content = $header.next('.nats-section-content');
        const $icon = $header.find('.nats-section-toggle');
        $content.slideToggle(200);
        $icon.toggleClass('fa-chevron-down fa-chevron-right');
        $header.toggleClass('collapsed');
      });

      // Helper function to update visibility based on createOnInit checkbox
      const updateCreateOnInitVisibility = function () {
        const op = $('#node-input-operation').val();
        if (op === 'publish') {
          if ($('#node-input-createOnInit').is(':checked')) {
            $('#subject-pattern-config').slideDown(200);
            $('#stream-settings-section').slideDown(200);
            $('#stream-limits-section').slideDown(200);
            $('#stream-advanced-section').slideDown(200);
          } else {
            $('#subject-pattern-config').slideUp(200);
            $('#stream-settings-section').slideUp(200);
            $('#stream-limits-section').slideUp(200);
            $('#stream-advanced-section').slideUp(200);
          }
        }
      };

      // CreateOnInit checkbox handler
      $('#node-input-createOnInit').on('change', function () {
        updateCreateOnInitVisibility();
      });

      // Operation handler
      $('#node-input-operation').on('change', function () {
        const op = $(this).val();
        if (op === 'publish') {
          $('#publish-config').slideDown(200);
          $('#stream-name-config').slideDown(200);
          $('#create-on-init-row').slideDown(200);
          // Show all fields for publish
          $('.create-only').show();
          // Let createOnInit checkbox control these sections
          updateCreateOnInitVisibility();
        } else if (op === 'create') {
          $('#publish-config').slideUp(200);
          $('#subject-pattern-config').slideDown(200);
          $('#stream-name-config').slideDown(200);
          $('#create-on-init-row').slideUp(200);
          $('#stream-settings-section').slideDown(200);
          $('#stream-limits-section').slideDown(200);
          $('#stream-advanced-section').slideDown(200);
          // Show all fields for create
          $('.create-only').show();
        } else if (op === 'update') {
          $('#publish-config').slideUp(200);
          $('#subject-pattern-config').slideDown(200);
          $('#stream-name-config').slideDown(200);
          $('#create-on-init-row').slideUp(200);
          $('#stream-settings-section').slideDown(200);
          $('#stream-limits-section').slideDown(200);
          $('#stream-advanced-section').slideDown(200);
          // Hide non-editable fields for update
          $('.create-only').hide();
        } else if (op === 'list') {
          $('#stream-configuration-section').slideUp(200);
          $('#create-on-init-row').slideUp(200);
          $('#stream-settings-section').slideUp(200);
          $('#stream-limits-section').slideUp(200);
          $('#stream-advanced-section').slideUp(200);
        } else if (op === 'info' || op === 'delete' || op === 'purge') {
          $('#stream-configuration-section').slideDown(200);
          $('#publish-config').slideUp(200);
          $('#subject-pattern-config').slideUp(200);
          $('#stream-name-config').slideDown(200);
          $('#create-on-init-row').slideUp(200);
          $('#stream-settings-section').slideUp(200);
          $('#stream-limits-section').slideUp(200);
          $('#stream-advanced-section').slideUp(200);
        } else {
          $('#stream-configuration-section').slideDown(200);
          $('#publish-config').slideUp(200);
          $('#subject-pattern-config').slideDown(200);
          $('#stream-name-config').slideDown(200);
          $('#create-on-init-row').slideUp(200);
          $('#stream-settings-section').slideUp(200);
          $('#stream-limits-section').slideUp(200);
          $('#stream-advanced-section').slideUp(200);
        }
      });
      $('#node-input-operation').trigger('change');
      $('#node-input-createOnInit').trigger('change');
    },
  });
</script>

<script type="text/x-red" data-template-name="nats-suite-stream-publisher">
  <style>
    .nats-stream-config {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    .nats-section {
      background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      margin-bottom: 12px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    }
    .nats-section-header {
      background: linear-gradient(135deg, #f1f3f5 0%, #e9ecef 100%);
      padding: 10px 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #e1e4e8;
      transition: background 0.2s ease;
      user-select: none;
    }
    .nats-section-header:hover {
      background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
    }
    .nats-section-header.collapsed { border-bottom: none; }
    .nats-section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      font-size: 13px;
      color: #2c3e50;
    }
    .nats-section-title i {
      width: 18px;
      text-align: center;
      color: #2FAF9C;
      font-size: 14px;
    }
    .nats-section-toggle {
      color: #6c757d;
      font-size: 11px;
    }
    .nats-section-content { padding: 14px; }
    .nats-form-row { margin-bottom: 12px; }
    .nats-form-row:last-child { margin-bottom: 0; }
    .nats-form-row label {
      display: block;
      font-size: 12px;
      font-weight: 500;
      color: #495057;
      margin-bottom: 5px;
    }
    .nats-form-row label i {
      margin-right: 6px;
      color: #2FAF9C;
      width: 14px;
      text-align: center;
    }
    .nats-form-row input[type="text"],
    .nats-form-row input[type="number"],
    .nats-form-row select {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid #ced4da;
      border-radius: 6px;
      font-size: 13px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      background: #fff;
    }
    .nats-form-row input:focus,
    .nats-form-row select:focus {
      border-color: #2FAF9C;
      box-shadow: 0 0 0 3px rgba(47, 175, 156, 0.15);
      outline: none;
    }
    .nats-hint {
      font-size: 11px;
      color: #6c757d;
      margin-top: 4px;
    }
    .nats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .nats-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      background: #d4edda;
      color: #155724;
    }
  </style>

  <div class="nats-stream-config">

    <!-- Basic Configuration -->
    <div class="nats-section">
      <div class="nats-section-header">
        <div class="nats-section-title">
          <i class="fa fa-cog"></i>
          <span>Basic Configuration</span>
        </div>
        <i class="fa fa-chevron-down nats-section-toggle"></i>
      </div>
      <div class="nats-section-content">
        <div class="nats-form-row">
          <label><i class="fa fa-tag"></i>Name</label>
          <input type="text" id="node-input-name" placeholder="Optional display name">
        </div>
        <div class="nats-form-row">
          <label><i class="fa fa-server"></i>NATS Server</label>
          <input type="text" id="node-input-server">
        </div>
        <div class="nats-form-row">
          <label><i class="fa fa-cogs"></i>Operation</label>
          <select id="node-input-operation">
            <option value="publish">Publish Messages</option>
            <option value="create">Create Stream</option>
            <option value="update">Update Stream</option>
            <option value="update-subjects">Update Subjects Only</option>
            <option value="info">Stream Info</option>
            <option value="delete">Delete Stream</option>
            <option value="purge">Purge Stream</option>
            <option value="list">List Streams</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Stream Configuration -->
    <div class="nats-section" id="stream-configuration-section">
      <div class="nats-section-header">
        <div class="nats-section-title">
          <i class="fa fa-database"></i>
          <span>Stream Configuration</span>
        </div>
        <i class="fa fa-chevron-down nats-section-toggle"></i>
      </div>
      <div class="nats-section-content">
        <div class="nats-form-row" id="stream-name-config">
          <label><i class="fa fa-database"></i>Stream Name</label>
          <input type="text" id="node-input-streamName" placeholder="sensor-data">
          <div class="nats-hint">Cannot be changed after creation</div>
        </div>
        <div class="nats-form-row" id="publish-config">
          <label><i class="fa fa-paper-plane"></i>Default Subject <span class="nats-badge">msg.subject</span></label>
          <input type="text" id="node-input-defaultSubject" placeholder="sensor.temperature">
          <div class="nats-hint">Used when msg.subject is not provided</div>
        </div>
        <div class="nats-form-row" id="create-on-init-row">
          <label>
            <input type="checkbox" id="node-input-createOnInit" style="width: auto; margin-right: 8px;">
            <i class="fa fa-plus-circle"></i>Create Stream on initialization
          </label>
          <div class="nats-hint">Automatically create stream when node initializes</div>
        </div>
        <div class="nats-form-row" id="subject-pattern-config">
          <label><i class="fa fa-filter"></i>Subject Pattern</label>
          <input type="text" id="node-input-subjectPattern" placeholder="sensor.*, data.>, orders.*">
          <div class="nats-hint">Pattern for subjects captured by this stream. Use comma to separate multiple subjects</div>
        </div>
      </div>
    </div>

    <!-- Stream Settings -->
    <div class="nats-section" id="stream-settings-section">
      <div class="nats-section-header">
        <div class="nats-section-title">
          <i class="fa fa-sliders"></i>
          <span>Stream Settings</span>
        </div>
        <i class="fa fa-chevron-down nats-section-toggle"></i>
      </div>
      <div class="nats-section-content">
        <div class="nats-grid">
          <div class="nats-form-row create-only">
            <label><i class="fa fa-archive"></i>Retention Policy</label>
            <select id="node-input-retention">
              <option value="limits">Limits</option>
              <option value="interest">Interest</option>
              <option value="workqueue">WorkQueue</option>
            </select>
            <div class="nats-hint">Cannot be changed after creation</div>
          </div>
          <div class="nats-form-row create-only">
            <label><i class="fa fa-hdd-o"></i>Storage</label>
            <select id="node-input-storage">
              <option value="file">File</option>
              <option value="memory">Memory</option>
            </select>
            <div class="nats-hint">Cannot be changed after creation</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-trash"></i>Discard Policy</label>
            <select id="node-input-discard">
              <option value="old">Old</option>
              <option value="new">New</option>
            </select>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-compress"></i>Compression</label>
            <select id="node-input-compression">
              <option value="none">None</option>
              <option value="s2">S2</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Limits -->
    <div class="nats-section" id="stream-limits-section">
      <div class="nats-section-header">
        <div class="nats-section-title">
          <i class="fa fa-tachometer"></i>
          <span>Limits</span>
        </div>
        <i class="fa fa-chevron-down nats-section-toggle"></i>
      </div>
      <div class="nats-section-content">
        <div class="nats-grid">
          <div class="nats-form-row">
            <label><i class="fa fa-list-ol"></i>Max Messages</label>
            <input type="number" id="node-input-maxMessages" placeholder="-1 (unlimited)">
            <div class="nats-hint">-1 for unlimited</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-database"></i>Max Bytes</label>
            <input type="number" id="node-input-maxBytes" placeholder="-1 (unlimited)">
            <div class="nats-hint">-1 for unlimited</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-clock-o"></i>Max Age</label>
            <input type="text" id="node-input-maxAge" placeholder="24h">
            <div class="nats-hint">e.g. 1h, 24h, 7d</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-window-restore"></i>Duplicate Window</label>
            <input type="text" id="node-input-duplicateWindow" placeholder="2m">
            <div class="nats-hint">Deduplication time window</div>
          </div>
          <div class="nats-form-row create-only">
            <label><i class="fa fa-users"></i>Max Consumers</label>
            <input type="number" id="node-input-maxConsumers" placeholder="-1 (unlimited)">
            <div class="nats-hint">-1 for unlimited. Cannot be changed after creation</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-filter"></i>Max Msgs/Subject</label>
            <input type="number" id="node-input-maxMsgsPerSubject" placeholder="-1 (unlimited)">
            <div class="nats-hint">-1 for unlimited</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-file-o"></i>Max Msg Size</label>
            <input type="number" id="node-input-maxMsgSize" placeholder="-1 (unlimited)">
            <div class="nats-hint">Max single message size in bytes</div>
          </div>
          <div class="nats-form-row">
            <label><i class="fa fa-copy"></i>Replicas</label>
            <input type="number" id="node-input-replicas" placeholder="1" min="1" max="5">
          </div>
        </div>
      </div>
    </div>

    <!-- Advanced Options -->
    <div class="nats-section" id="stream-advanced-section">
      <div class="nats-section-header collapsed">
        <div class="nats-section-title">
          <i class="fa fa-cogs"></i>
          <span>Advanced Options</span>
        </div>
        <i class="fa fa-chevron-right nats-section-toggle"></i>
      </div>
      <div class="nats-section-content" style="display: none;">
        <div class="nats-grid">
          <div class="nats-form-row">
            <label>
              <input type="checkbox" id="node-input-allowDirect" style="width: auto; margin-right: 8px;">
              <i class="fa fa-bolt"></i>Allow Direct Get
            </label>
            <div class="nats-hint">Allow direct message access</div>
          </div>
          <div class="nats-form-row">
            <label>
              <input type="checkbox" id="node-input-mirrorDirect" style="width: auto; margin-right: 8px;">
              <i class="fa fa-clone"></i>Mirror Direct
            </label>
            <div class="nats-hint">Allow direct access from mirror</div>
          </div>
          <div class="nats-form-row">
            <label>
              <input type="checkbox" id="node-input-sealed" style="width: auto; margin-right: 8px;">
              <i class="fa fa-lock"></i>Sealed
            </label>
            <div class="nats-hint">Seal stream (read-only)</div>
          </div>
          <div class="nats-form-row create-only">
            <label>
              <input type="checkbox" id="node-input-denyDelete" style="width: auto; margin-right: 8px;">
              <i class="fa fa-ban"></i>Deny Delete
            </label>
            <div class="nats-hint">Prevent message deletion. Cannot be changed after creation</div>
          </div>
          <div class="nats-form-row create-only">
            <label>
              <input type="checkbox" id="node-input-denyPurge" style="width: auto; margin-right: 8px;">
              <i class="fa fa-ban"></i>Deny Purge
            </label>
            <div class="nats-hint">Prevent stream purging. Cannot be changed after creation</div>
          </div>
          <div class="nats-form-row">
            <label>
              <input type="checkbox" id="node-input-allowRollupHdrs" style="width: auto; margin-right: 8px;">
              <i class="fa fa-compress"></i>Allow Rollup Headers
            </label>
            <div class="nats-hint">Enable header rollups</div>
          </div>
          <div class="nats-form-row create-only">
            <label>
              <input type="checkbox" id="node-input-allowMsgTtl" style="width: auto; margin-right: 8px;">
              <i class="fa fa-hourglass-half"></i>Allow Message TTL
            </label>
            <div class="nats-hint">Allow per-message TTL. Can only be enabled at creation</div>
          </div>
        </div>
      </div>
    </div>

  </div>
</script>

<script type="text/x-red" data-help-name="nats-suite-stream-publisher">
      <p>Publishes messages to NATS JetStream with persistence and acknowledgment, and manages JetStream streams.</p>

      <h3>Operations</h3>
      <p>This node supports multiple operations for stream management and message publishing:</p>

      <h4>Publish Messages (default)</h4>
      <p>Publishes messages to a JetStream stream with persistence and acknowledgment.</p>
      <p><strong>Create Stream on initialization</strong>: When enabled, the stream is automatically created when the node initializes or reconnects, using the configured stream settings. When disabled, the node assumes the stream already exists and will only publish messages to it - no stream configuration options are shown.</p>

      <h4>Create Stream</h4>
      <p>Creates a new JetStream stream with the configured settings. The node will display <strong>"stream {name} created"</strong> for 2 seconds upon successful creation, then return to showing the connection state.</p>

      <h4>Update Stream</h4>
      <p>Updates an existing stream's configuration. Can be triggered via node configuration or by sending a message with <code>msg.operation = "update"</code>.</p>

      <h4>Update Subjects Only</h4>
      <p>Updates only the subject patterns for an existing stream without changing other settings.</p>

      <h4>Stream Info</h4>
      <p>Retrieves detailed information about a stream including configuration, state, and statistics.</p>

      <h4>Delete Stream</h4>
      <p>Permanently deletes a stream and all its messages.</p>

      <h4>Purge Stream</h4>
      <p>Removes all messages from a stream while keeping the stream itself.</p>

      <h4>List Streams</h4>
      <p>Lists all available streams in the JetStream server.</p>

      <h3>Inputs (Publish)</h3>
      <dl class="message-properties">
        <dt>payload <span class="property-type">any</span></dt>
        <dd>Data to publish to the stream</dd>
        <dt class="optional">subject <span class="property-type">string</span></dt>
        <dd>Target subject (overrides default subject configuration)</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>Message headers to attach</dd>
        <dt class="optional">_msgID <span class="property-type">string</span></dt>
        <dd>Optional message ID for deduplication within the duplicate window</dd>
      </dl>

      <h3>Inputs (Stream Operations)</h3>
      <dl class="message-properties">
        <dt class="optional">operation <span class="property-type">string</span></dt>
        <dd>Operation to perform: "create", "update", "update-subjects", "info", "delete", "purge", "list"</dd>
        <dt class="optional">stream <span class="property-type">string</span></dt>
        <dd>Stream name (overrides node configuration)</dd>
        <dt class="optional">payload <span class="property-type">object</span></dt>
        <dd>For create/update operations: full stream configuration in NATS native format. See <a href="https://docs.nats.io/nats-concepts/jetstream/streams" target="_blank">NATS Stream Configuration</a></dd>
        <dt class="optional">subjects <span class="property-type">string[] | string</span></dt>
        <dd>Subject patterns for the stream (array or comma-separated string)</dd>
        <dt class="optional">retention <span class="property-type">string</span></dt>
        <dd>Retention policy: "limits", "interest", or "workqueue"</dd>
        <dt class="optional">maxMessages <span class="property-type">number</span></dt>
        <dd>Maximum number of messages (-1 for unlimited)</dd>
        <dt class="optional">maxBytes <span class="property-type">number</span></dt>
        <dd>Maximum total bytes (-1 for unlimited)</dd>
        <dt class="optional">maxAge <span class="property-type">string</span></dt>
        <dd>Maximum message age (e.g., "24h", "7d")</dd>
      </dl>

      <h3>Outputs (Publish)</h3>
      <dl class="message-properties">
        <dt>sequence <span class="property-type">number</span></dt>
        <dd>Message sequence number in the stream</dd>
        <dt>stream <span class="property-type">string</span></dt>
        <dd>Stream name where message was published</dd>
        <dt>published <span class="property-type">boolean</span></dt>
        <dd>True if published successfully, false on error</dd>
        <dt>subject <span class="property-type">string</span></dt>
        <dd>Subject where message was published</dd>
        <dt class="optional">_duplicate <span class="property-type">boolean</span></dt>
        <dd>True if message was detected as a duplicate</dd>
      </dl>

      <h3>Outputs (Stream Operations)</h3>
      <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>Operation result containing success status, stream name, and relevant data</dd>
        <dt>operation <span class="property-type">string</span></dt>
        <dd>The operation that was performed</dd>
        <dt class="optional">config <span class="property-type">object</span></dt>
        <dd>Stream configuration (for info, create, update operations)</dd>
        <dt class="optional">state <span class="property-type">object</span></dt>
        <dd>Stream state including message count, bytes, etc. (for info operation)</dd>
      </dl>

      <h3>Stream Configuration</h3>
      <p>Streams can be configured with various settings (only visible when "Create Stream on initialization" is enabled in Publish mode):</p>
      <ul>
        <li><strong>Stream Name</strong>: Unique identifier for the stream</li>
        <li><strong>Subject Pattern</strong>: Wildcards pattern for subjects captured (e.g., "sensor.*")</li>
        <li><strong>Retention Policy</strong>: How messages are retained (limits/interest/workqueue)</li>
        <li><strong>Storage</strong>: File-based (persistent) or memory-based (fast but volatile)</li>
        <li><strong>Limits</strong>: Max messages, bytes, age, and per-subject limits</li>
        <li><strong>Deduplication</strong>: Time window for detecting duplicate messages</li>
        <li><strong>Replicas</strong>: Number of stream replicas for high availability</li>
      </ul>

      <h3>Node Status</h3>
      <p>The node displays its current state:</p>
      <ul>
        <li><strong>connected</strong> (green): Connected to NATS server</li>
        <li><strong>connecting</strong> (yellow): Attempting to connect</li>
        <li><strong>disconnected</strong> (red): Not connected</li>
        <li><strong>stream {name} created</strong> (green, 2 seconds): Stream successfully created</li>
      </ul>

      <h3>Examples</h3>

      <h4>Publish Message</h4>
      <pre>msg.subject = "sensor.temperature";
    msg.payload = { value: 22.5, unit: "C" };
    return msg;</pre>

      <h4>Create Stream Programmatically (Simple)</h4>
      <pre>msg.operation = "create";
  msg.stream = "my-stream";
  msg.subjects = ["data.>"];
  msg.retention = "limits";
  msg.maxMessages = 1000;
  msg.maxAge = "24h";
  return msg;</pre>

      <h4>Create Stream Programmatically (Native NATS Format)</h4>
      <pre>msg.operation = "create";
  msg.payload = {
      name: "my-stream",
      subjects: ["data.>"],
      retention: "limits",
      max_msgs: 1000,
      max_age: 86400000000000,  // 24h in nanoseconds
      storage: "file"
  };
  return msg;</pre>

      <h4>Get Stream Info</h4>
      <pre>msg.operation = "info";
    msg.stream = "my-stream";
    return msg;</pre>

      <h3>Details</h3>
      <p>This node provides comprehensive JetStream stream management alongside message publishing. When publishing, messages receive acknowledgments and sequence numbers. The stream is automatically created on startup if it doesn't exist, with configuration from the node settings.</p>

      <p>For advanced use cases, stream operations can be performed programmatically by setting <code>msg.operation</code> to the desired action. Stream configurations can be provided either as individual message properties or as a complete NATS-native configuration object in <code>msg.payload</code>.</p>

      <p>For more information about NATS JetStream stream configuration, see the <a href="https://docs.nats.io/nats-concepts/jetstream/streams" target="_blank">NATS JetStream Streams Documentation</a>.</p>
</script>
